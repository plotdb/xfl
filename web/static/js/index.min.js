var editor,base="https://plotdb.github.io/xl-fontset/alpha";base="/assets/fonts",(editor={init:function(){var r=this;return this.ldcv=new ldcover({root:document.querySelector(".ldcv")}),this.ldld=new ldLoader({root:document.querySelector(".ldcv .inner .ld")}),this.svg=document.querySelector("svg"),this.path=document.querySelector("path"),this.textarea=document.querySelector("textarea"),this.textarea.addEventListener("keyup",function(){return r.sync()}),document.querySelector("#chooser").addEventListener("click",function(t){var e,n;if(t&&t.target)return"svg"===t.target.getAttribute("data-target")?r.toSvg():(t=ld$.parent(t.target,"[data-font]",document.querySelector("#chooser")))&&(n=(e=[t.getAttribute("data-font"),t.getAttribute("data-type")])[0])?"en"===e[1]?xfl.load({path:"fonts/"+n+".ttf"}).then(function(t){return r.font=t,r.sync()}):r.load(n):void 0}),this.load("openhuninn-1.1")},toSvg:function(){var o=this;return this.ldld.on().then(function(){return o.ldcv.toggle()}).then(function(){return o.font.getotf()}).then(function(t){var e=t.getPath(o.textarea.value.replace(/\s/g," "),0,0,48),n=e.getBoundingBox(),r=e.toPathData(),t=o.svg.getBoundingClientRect(),e=t.width/2-(n.x2-n.x1)/2-n.x1,n=t.height/2-(n.y2-n.y1)/2-n.y1;return o.path.setAttribute("d",r),o.path.setAttribute("transform","translate("+e+", "+n+")")}).then(function(){return o.ldld.off()})},load:function(t){var e=this;return xfl.load({path:base+"/"+t}).then(function(t){return e.font=t,e.font.sync(document.body.innerText),e.sync()})},sync:function(){if(this.font)return this.font.sync(this.textarea.value),this.textarea.setAttribute("class","form-control "+this.font.className),document.body.setAttribute("class",this.font.className+"")}}).init(),xfl.load({path:base+"/NaikaiFont-Bold"}).then(function(e){var t=Array.from(document.querySelectorAll("h1,h2,h3")),n=t.map(function(t){return t.innerText}).join("");return e.sync(n),t.map(function(t){return t.classList.add(e.className)})});